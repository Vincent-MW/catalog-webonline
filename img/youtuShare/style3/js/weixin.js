(function(A){A.fn.wx=function(F){var G=A(this);var B=A.extend({},A.fn.wx.defaults,F);document.addEventListener("WeixinJSBridgeReady",function(){window.G_WEIXIN_READY=true},false);function E(K,J){var L=2000;J=J||0;if(true===window.G_WEIXIN_READY||("WeixinJSBridge" in window)){K.apply(null,[])}else{if(J<=L){setTimeout(function(){E(K,J++)},15)}}}var I={execHandler:function(K){if(K&&K instanceof Object){var M=K.callback||null;var J=K.args||[];var L=K.context||null;var N=K.delay||-1;if(M&&M instanceof Function){if(typeof(N)=="number"&&N>=0){setTimeout(function(){M.apply(L,J)},N)}else{M.apply(L,J)}}}},execAfterMergerHandler:function(L,K){if(L&&L instanceof Object){var J=L.args||[];L.args=K.concat(J)}this.execHandler(L)}};var C={Share:{"weibo":function(K,J){E(function(){WeixinJSBridge.on("menu:share:weibo",function(L){WeixinJSBridge.invoke("shareWeibo",K,function(M){I.execAfterMergerHandler(J,[M])})})})},"timeline":function(K,J){E(function(){WeixinJSBridge.on("menu:share:timeline",function(L){WeixinJSBridge.invoke("shareTimeline",K,function(M){I.execAfterMergerHandler(J,[M])})})})},"message":function(K,J){E(function(){WeixinJSBridge.on("menu:share:appmessage",function(L){WeixinJSBridge.invoke("sendAppMessage",K,function(M){I.execAfterMergerHandler(J,[M])})})})}},"setToolbar":function(J,K){E(function(){if(true===J){WeixinJSBridge.call("showToolbar")}else{WeixinJSBridge.call("hideToolbar")}I.execAfterMergerHandler(K,[J])})},"setOptionMenu":function(J,K){E(function(){if(true===J){WeixinJSBridge.call("showOptionMenu")}else{WeixinJSBridge.call("hideOptionMenu")}I.execAfterMergerHandler(K,[J])})},"pay":function(K,J){E(function(){var L={"appId":"","timeStamp":"","nonceStr":"","package":"","signType":"","paySign":""};var N=J||{};var P=null;var O=[K];for(var M in L){if(L.hasOwnProperty(M)){L[M]=K[M]||"";console.info(M+" = "+L[M])}}WeixinJSBridge.invoke("getBrandWCPayRequest",L,function(R){var Q="get_brand_wcpay_request:";switch(R.err_msg){case Q+"ok":P=N.success;break;case Q+"fail":P=N.fail||N.error;break;case Q+"cancel":P=N.cancel||N.error;break;default:P=N.error;break}I.execAfterMergerHandler(P,O)})})}};var D={"content":B.con};var H={"img_url":B.img,"img_width":180,"img_height":180,"link":B.link,"desc":B.con,"title":B.title};handler={callback:function(){}};C.Share.timeline(H,handler);C.Share.message(H,handler);C.Share.weibo(D,handler);return G};A.fn.wx.defaults={title:"微信场景",con:"给您带来与众不同的场景体验",link:document.URL,img:location.protocol+"//"+location.hostname+":"+location.port+"/template/19/img/wx_img_01@2x.jpg?time=1"};A.fn.wx.version="1.0.0"})(Zepto);